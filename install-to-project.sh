#!/bin/bash
# Mosaic å®‰è£…è„šæœ¬ - åœ¨ä»»ä½•é¡¹ç›®ä¸­æ·»åŠ  Mosaic skill

set -e

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸŽ¨ Mosaic Skill å®‰è£…å™¨"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# èŽ·å– Mosaic ä»“åº“è·¯å¾„
MOSAIC_PATH="/Users/yukungao/github/ClaudeIDE-Mosaic"

# å¦‚æžœæä¾›äº†å‚æ•°ï¼Œä½¿ç”¨å‚æ•°ä½œä¸ºç›®æ ‡é¡¹ç›®è·¯å¾„
if [ -n "$1" ]; then
    TARGET_PROJECT="$1"
else
    # å¦åˆ™ä½¿ç”¨å½“å‰ç›®å½•
    TARGET_PROJECT="$(pwd)"
fi

echo "ðŸ“ ç›®æ ‡é¡¹ç›®: $TARGET_PROJECT"
echo "ðŸ“¦ Mosaic è·¯å¾„: $MOSAIC_PATH"
echo ""

# æ£€æŸ¥ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨
if [ ! -d "$TARGET_PROJECT" ]; then
    echo "âŒ é”™è¯¯: ç›®æ ‡é¡¹ç›®ä¸å­˜åœ¨"
    exit 1
fi

# åˆ›å»º .claude/skills ç›®å½•
SKILLS_DIR="$TARGET_PROJECT/.claude/skills"
mkdir -p "$SKILLS_DIR"
echo "âœ… åˆ›å»º skills ç›®å½•: $SKILLS_DIR"

# é€‰æ‹©å®‰è£…æ–¹å¼
echo ""
echo "è¯·é€‰æ‹©å®‰è£…æ–¹å¼ï¼š"
echo "  [1] ç¬¦å·é“¾æŽ¥ (æŽ¨è - è‡ªåŠ¨åŒæ­¥æ›´æ–°)"
echo "  [2] å¤åˆ¶æ–‡ä»¶ (ç‹¬ç«‹ - ä¸ä¼šè‡ªåŠ¨æ›´æ–°)"
echo "  [3] å¼•ç”¨æ–‡ä»¶ (è½»é‡ - é€šè¿‡è·¯å¾„å¼•ç”¨)"
echo ""
read -p "è¯·è¾“å…¥é€‰é¡¹ [1-3]: " choice

case $choice in
    1)
        echo ""
        echo "ðŸ”— åˆ›å»ºç¬¦å·é“¾æŽ¥..."
        ln -sf "$MOSAIC_PATH/.claude/skills/mosaic.md" "$SKILLS_DIR/mosaic.md"
        echo "âœ… ç¬¦å·é“¾æŽ¥å·²åˆ›å»º"
        echo "   å½“ Mosaic æ›´æ–°æ—¶ï¼Œè¿™ä¸ªé¡¹ç›®ä¼šè‡ªåŠ¨èŽ·å¾—æ›´æ–°"
        ;;
    2)
        echo ""
        echo "ðŸ“‹ å¤åˆ¶æ–‡ä»¶..."
        cp "$MOSAIC_PATH/.claude/skills/mosaic.md" "$SKILLS_DIR/mosaic.md"
        echo "âœ… æ–‡ä»¶å·²å¤åˆ¶"
        echo "   æ³¨æ„: éœ€è¦æ‰‹åŠ¨è¿è¡Œæ­¤è„šæœ¬æ¥æ›´æ–°"
        ;;
    3)
        echo ""
        echo "ðŸ“ åˆ›å»ºå¼•ç”¨æ–‡ä»¶..."
        cat > "$SKILLS_DIR/mosaic.md" <<EOF
# Mosaic - AI Design Director

**å¿«é€Ÿè°ƒç”¨è®¾è®¡æœåŠ¡**

---

## ä½¿ç”¨æ–¹æ³•

å½“ä½ éœ€è¦ä¸ºè¿™ä¸ªé¡¹ç›®è®¾è®¡ UI æ—¶ï¼Œå‘Šè¯‰ Agentï¼š

\`\`\`
è¯·è¯»å– $MOSAIC_PATH/SYSTEM_PROMPT.md
ç„¶åŽä¸ºè¿™ä¸ªé¡¹ç›®æä¾›è®¾è®¡æœåŠ¡
\`\`\`

æˆ–è€…ï¼š

\`\`\`
ä½¿ç”¨ Mosaic ä¸ºè¿™ä¸ªé¡¹ç›®è®¾è®¡ UI
\`\`\`

---

## å…³äºŽ Mosaic

Mosaic æ˜¯ä¸€ä¸ª AI è®¾è®¡æ€»ç›‘ Agentï¼Œå®ƒä¼šï¼š
1. æŽ¢ç´¢ä½ çš„é¡¹ç›®
2. é—®è¯Šä½ çš„å®¡ç¾Žåå¥½
3. åœ¨å…¨çƒæœç´¢åŒ¹é…çš„ UI èµ„æº
4. ç”Ÿæˆå®Œæ•´çš„è®¾è®¡åŒ…

**Mosaic è·¯å¾„**: \`$MOSAIC_PATH\`
**GitHub**: https://github.com/yg1112/ClaudeIDE-Mosaic

---

**çŽ°åœ¨å°±å¼€å§‹ï¼šå‘Šè¯‰ Agent "ä½¿ç”¨ Mosaic ä¸ºè¿™ä¸ªé¡¹ç›®è®¾è®¡ UI"**
EOF
        echo "âœ… å¼•ç”¨æ–‡ä»¶å·²åˆ›å»º"
        echo "   è½»é‡çº§å¼•ç”¨ï¼ŒæŒ‡å‘ Mosaic ä¸»ä»“åº“"
        ;;
    *)
        echo "âŒ æ— æ•ˆé€‰é¡¹"
        exit 1
        ;;
esac

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Mosaic skill å®‰è£…å®Œæˆï¼"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "çŽ°åœ¨åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥ï¼š"
echo "  1. è¾“å…¥ /mosaic è°ƒç”¨è®¾è®¡æœåŠ¡"
echo "  2. æˆ–è€…è¯´ 'ä½¿ç”¨ Mosaic ä¸ºè¿™ä¸ªé¡¹ç›®è®¾è®¡ UI'"
echo ""
echo "æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: $MOSAIC_PATH/README.md"
echo ""
